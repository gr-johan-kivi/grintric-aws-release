{"version":4,"terraform_version":"1.9.0","serial":11,"lineage":"d76234ac-e00e-74d2-eab7-45fb44338cba","outputs":{},"resources":[{"mode":"managed","type":"aws_ecs_cluster","name":"cluster","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:ecs:eu-north-1:715841356156:cluster/grintric-cluster","configuration":[],"id":"arn:aws:ecs:eu-north-1:715841356156:cluster/grintric-cluster","name":"grintric-cluster","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"disabled"}],"tags":{"project":"grintric"},"tags_all":{"project":"grintric"}},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"aws_internet_gateway","name":"igw","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:ec2:eu-north-1:715841356156:internet-gateway/igw-0ebef78b51b1b59d6","id":"igw-0ebef78b51b1b59d6","owner_id":"715841356156","tags":{"project":"grintric"},"tags_all":{"project":"grintric"},"timeouts":null,"vpc_id":"vpc-0250145a68d8fb153"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19","dependencies":["aws_vpc.vpc"]}]},{"mode":"managed","type":"aws_route_table","name":"public_rt","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:ec2:eu-north-1:715841356156:route-table/rtb-0b82be3175d8d4ae7","id":"rtb-0b82be3175d8d4ae7","owner_id":"715841356156","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-0ebef78b51b1b59d6","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"project":"grintric"},"tags_all":{"project":"grintric"},"timeouts":null,"vpc_id":"vpc-0250145a68d8fb153"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19","dependencies":["aws_internet_gateway.igw","aws_vpc.vpc"]}]},{"mode":"managed","type":"aws_vpc","name":"vpc","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"arn":"arn:aws:ec2:eu-north-1:715841356156:vpc/vpc-0250145a68d8fb153","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-062335ec3b6133605","default_route_table_id":"rtb-04a70dbd5af84baeb","default_security_group_id":"sg-04a03aa3bb5ffa62e","dhcp_options_id":"dopt-074ff66495d191737","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-0250145a68d8fb153","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-04a70dbd5af84baeb","owner_id":"715841356156","tags":{"project":"grintric"},"tags_all":{"project":"grintric"}},"sensitive_attributes":[],"private":"eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="}]},{"module":"module.backend","mode":"managed","type":"aws_ecr_repository","name":"backend","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:ecr:eu-north-1:715841356156:repository/grintric-backend","encryption_configuration":[{"encryption_type":"AES256","kms_key":""}],"force_delete":null,"id":"grintric-backend","image_scanning_configuration":[{"scan_on_push":false}],"image_tag_mutability":"MUTABLE","name":"grintric-backend","registry_id":"715841356156","repository_url":"715841356156.dkr.ecr.eu-north-1.amazonaws.com/grintric-backend","tags":{"project":"grintric"},"tags_all":{"project":"grintric"},"timeouts":null},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxMjAwMDAwMDAwMDAwfX0="}]},{"module":"module.backend","mode":"managed","type":"aws_route_table_association","name":"public_rta","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"gateway_id":"","id":"rtbassoc-0fae4a47497b6c07a","route_table_id":"rtb-0b82be3175d8d4ae7","subnet_id":"subnet-0657325c54b2dcae1","timeouts":null},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19","dependencies":["aws_internet_gateway.igw","aws_route_table.public_rt","aws_vpc.vpc","module.backend.aws_subnet.backend"]}]},{"module":"module.backend","mode":"managed","type":"aws_subnet","name":"backend","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"arn":"arn:aws:ec2:eu-north-1:715841356156:subnet/subnet-0657325c54b2dcae1","assign_ipv6_address_on_creation":false,"availability_zone":"eu-north-1a","availability_zone_id":"eun1-az1","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0657325c54b2dcae1","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"715841356156","private_dns_hostname_type_on_launch":"ip-name","tags":{"project":"grintric"},"tags_all":{"project":"grintric"},"timeouts":null,"vpc_id":"vpc-0250145a68d8fb153"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9","dependencies":["aws_vpc.vpc"]}]},{"module":"module.backend.module.pgvector","mode":"managed","type":"aws_ecs_service","name":"main","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"cluster":"arn:aws:ecs:eu-north-1:715841356156:cluster/grintric-cluster","deployment_circuit_breaker":[{"enable":false,"rollback":false}],"deployment_controller":[{"type":"ECS"}],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":0,"iam_role":"/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS","id":"arn:aws:ecs:eu-north-1:715841356156:service/grintric-cluster/grintric-service","launch_type":"FARGATE","load_balancer":[],"name":"grintric-service","network_configuration":[{"assign_public_ip":true,"security_groups":["sg-0615bfd5f9b8be0e6"],"subnets":["subnet-0657325c54b2dcae1"]}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"LATEST","propagate_tags":"NONE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":null,"tags_all":{},"task_definition":"arn:aws:ecs:eu-north-1:715841356156:task-definition/grintric:1","timeouts":null,"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9","dependencies":["aws_ecs_cluster.cluster","aws_vpc.vpc","module.backend.aws_subnet.backend","module.backend.module.pgvector.aws_ecs_task_definition.pgvector","module.backend.module.pgvector.aws_iam_role.ecs_full_access","module.backend.module.pgvector.aws_security_group.postgres"]}]},{"module":"module.backend.module.pgvector","mode":"managed","type":"aws_ecs_task_definition","name":"pgvector","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"arn":"arn:aws:ecs:eu-north-1:715841356156:task-definition/grintric:1","arn_without_revision":"arn:aws:ecs:eu-north-1:715841356156:task-definition/grintric","container_definitions":"[{\"environment\":[{\"name\":\"POSTGRES_DB\",\"value\":\"vectordb\"},{\"name\":\"POSTGRES_PASSWORD\",\"value\":\"sup3rCal1fr4diList1Exp1alid0ci0s\"}],\"essential\":true,\"image\":\"pgvector/pgvector:pg13\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-region\":\"eu-north-1\",\"awslogs-stream-prefix\":\"ecs\",\"awslogs-group\":\"/ecs/grintric\"}},\"mountPoints\":[],\"name\":\"grintric-pgvector\",\"portMappings\":[{\"containerPort\":5432,\"hostPort\":5432,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]","cpu":"512","enable_fault_injection":false,"ephemeral_storage":[],"execution_role_arn":"arn:aws:iam::715841356156:role/ecs-full-access-role","family":"grintric","id":"grintric","inference_accelerator":[],"ipc_mode":"","memory":"1024","network_mode":"awsvpc","pid_mode":"","placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"revision":1,"runtime_platform":[],"skip_destroy":false,"tags":{},"tags_all":{},"task_role_arn":"arn:aws:iam::715841356156:role/ecs-full-access-role","track_latest":false,"volume":[]},"sensitive_attributes":[],"private":"eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==","dependencies":["module.backend.module.pgvector.aws_iam_role.ecs_full_access"]}]},{"module":"module.backend.module.pgvector","mode":"managed","type":"aws_iam_role","name":"ecs_full_access","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:iam::715841356156:role/ecs-full-access-role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"ecs.amazonaws.com\",\"ecs-tasks.amazonaws.com\"]}}],\"Version\":\"2012-10-17\"}","create_date":"2025-02-17T14:03:29Z","description":"","force_detach_policies":false,"id":"ecs-full-access-role","inline_policy":[{"name":"ecs-full-access-policy","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecs:*\",\"ecr:*\",\"logs:*\",\"cloudwatch:*\",\"elasticloadbalancing:*\",\"ec2:*\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"}],"managed_policy_arns":["arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"],"max_session_duration":3600,"name":"ecs-full-access-role","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROA2NK3YIF6MOUULAQJL"},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.backend.module.pgvector","mode":"managed","type":"aws_iam_role_policy","name":"ecs_full_access","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"id":"ecs-full-access-role:ecs-full-access-policy","name":"ecs-full-access-policy","name_prefix":"","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecs:*\",\"ecr:*\",\"logs:*\",\"cloudwatch:*\",\"elasticloadbalancing:*\",\"ec2:*\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}","role":"ecs-full-access-role"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.backend.module.pgvector.aws_iam_role.ecs_full_access"]}]},{"module":"module.backend.module.pgvector","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_task_execution_role_policy","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"id":"ecs-full-access-role-20250217140329723100000001","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"ecs-full-access-role"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["module.backend.module.pgvector.aws_iam_role.ecs_full_access"]}]},{"module":"module.backend.module.pgvector","mode":"managed","type":"aws_security_group","name":"postgres","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"arn":"arn:aws:ec2:eu-north-1:715841356156:security-group/sg-0615bfd5f9b8be0e6","description":"Security group for PostgreSQL","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0615bfd5f9b8be0e6","ingress":[{"cidr_blocks":["10.0.0.0/24"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"grintric-sg","name_prefix":"","owner_id":"715841356156","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0250145a68d8fb153"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=","dependencies":["aws_vpc.vpc"]}]},{"module":"module.backend.module.redis","mode":"managed","type":"aws_elasticache_cluster","name":"redis","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"apply_immediately":null,"arn":"arn:aws:elasticache:eu-north-1:715841356156:cluster:grintric-redis","auto_minor_version_upgrade":"true","availability_zone":"eu-north-1c","az_mode":"single-az","cache_nodes":[{"address":"grintric-redis.fbemwq.0001.eun1.cache.amazonaws.com","availability_zone":"eu-north-1c","id":"0001","outpost_arn":"","port":6379}],"cluster_address":null,"cluster_id":"grintric-redis","configuration_endpoint":null,"engine":"redis","engine_version":"7.1","engine_version_actual":"7.1.0","final_snapshot_identifier":null,"id":"grintric-redis","ip_discovery":"ipv4","log_delivery_configuration":[],"maintenance_window":"sat:05:00-sat:06:00","network_type":"ipv4","node_type":"cache.t3.micro","notification_topic_arn":null,"num_cache_nodes":1,"outpost_mode":null,"parameter_group_name":"default.redis7","port":6379,"preferred_availability_zones":null,"preferred_outpost_arn":"","replication_group_id":"","security_group_ids":[],"snapshot_arns":null,"snapshot_name":null,"snapshot_retention_limit":0,"snapshot_window":"04:00-05:00","subnet_group_name":"default","tags":{},"tags_all":{},"transit_encryption_enabled":false},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.frontend","mode":"managed","type":"aws_ecr_repository","name":"frontend","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:ecr:eu-north-1:715841356156:repository/grintric-frontend","encryption_configuration":[{"encryption_type":"AES256","kms_key":""}],"force_delete":null,"id":"grintric-frontend","image_scanning_configuration":[{"scan_on_push":false}],"image_tag_mutability":"MUTABLE","name":"grintric-frontend","registry_id":"715841356156","repository_url":"715841356156.dkr.ecr.eu-north-1.amazonaws.com/grintric-frontend","tags":{},"tags_all":{},"timeouts":null},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxMjAwMDAwMDAwMDAwfX0="}]},{"module":"module.frontend","mode":"managed","type":"aws_subnet","name":"frontend","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"arn":"arn:aws:ec2:eu-north-1:715841356156:subnet/subnet-082a0d4fb4eaf2525","assign_ipv6_address_on_creation":false,"availability_zone":"eu-north-1a","availability_zone_id":"eun1-az1","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-082a0d4fb4eaf2525","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"715841356156","private_dns_hostname_type_on_launch":"ip-name","tags":{"project":"grintric"},"tags_all":{"project":"grintric"},"timeouts":null,"vpc_id":"vpc-0250145a68d8fb153"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9","dependencies":["aws_vpc.vpc"]}]}],"check_results":null}
